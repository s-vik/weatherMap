(this["webpackJsonpweather-map"]=this["webpackJsonpweather-map"]||[]).push([[0],{114:function(e,t,r){e.exports={preloader:"preloader_preloader__NrsZe"}},131:function(e,t,r){},253:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r(0),c=r.n(a),i=r(54),s=r.n(i),o=(r(131),r(132),function(e){e&&e instanceof Function&&Promise.resolve().then(r.bind(null,132)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;r(e),n(e),a(e),c(e),i(e)}))}),u=(r(81),r(11)),d=r(28),h=r(260),j=r(256),l=function(e){var t=e.viewCity,r=e.weatherForViewMode,a=e.searchCity;return r?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(d.b,{to:"/",onClick:function(){return t(!1,"")},children:"X"}),Object(n.jsx)(h.a,{children:Object(n.jsxs)(j.a,{variant:"flush",children:[Object(n.jsxs)(j.a.Item,{children:["City: ",a]}),Object(n.jsxs)(j.a.Item,{children:["Weather: ",r.weather[0].description]}),Object(n.jsxs)(j.a.Item,{children:["Temp: ",r.main.temp]}),Object(n.jsx)(j.a.Item,{children:r.main.feels_like}),Object(n.jsxs)(j.a.Item,{children:["Wind: ",r.wind.speed," m/s"]}),Object(n.jsxs)(j.a.Item,{children:["Humidity: ",r.main.humidity," %"]}),Object(n.jsxs)(j.a.Item,{children:["Pressure: ",r.main.pressure," hPa"]}),Object(n.jsxs)(j.a.Item,{children:["Temp max: ",r.main.temp_max]}),Object(n.jsxs)(j.a.Item,{children:["Temp min: ",r.main.temp_min]})]})})]}):Object(n.jsx)(d.b,{to:"/",onClick:function(){return t(!1,"")},children:"X"})},b=r(14),w=r(25),O=r.n(w),p=r(124),f=r(37),m=r(43),x=r(13),C=r(113).create({baseURL:"http://api.openweathermap.org/data/2.5/"}),y=function(e){return Object(f.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.get("weather?q=".concat(e,"&appid=30ab1cf26f05bfc030ca991aa18e3b43&lang=ru&mode=json&units=metric")).catch((function(e){return console.error(e)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},v="weather_card_SET_CURRENT_CITY",g="weather_card_SET_CURRENT_CITY_WEATHER",_="weather_card_SET_IS_FETCHING",I="weather_card_UPDATE_WEATHER_CARD",E="weather_card_DELETE_WEATHER_CARD",T="weather_card_TOGGLE_VIEW_MODE",F="weather_card_SET_VIEW_CITY",W="weather_card_SET_WEATHER_FOR_VIEW_MODE",M="weather_card_SET_ERROR",k={currentCity:[],weatherInCurrentCities:[],isFetching:!1,viewMode:!1,viewCityName:"",weatherForViewMode:null,error:""},R=function(e){return{type:v,city:e}},S=function(e){return{type:g,weather:e}},N=function(e,t){return{type:I,id:e,weather:t}},V=function(e){return{type:_,isFetching:e}},D=function(e){return{type:M,error:e}},A=function(e,t){return function(r){r(function(e){return{type:T,viewMode:e}}(e)),r({type:F,viewCityName:t})}},H=function(e){return function(){var t=Object(f.a)(O.a.mark((function t(r){var n,a,c,i,s,o,u;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(V(!0)),t.next=3,y(e).catch((function(e){return r(D("error - no data"))}));case 3:n=t.sent,a=n.statusText,c=n.data,i=c.weather,s=c.wind,o=c.main,u=c.id,"OK"===a?(r(R(e)),r(S({weather:i,wind:s,main:o,city:e,id:u})),r(V(!1))):r(D("error - no data"));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(x.a)(Object(x.a)({},e),{},{currentCity:[].concat(Object(m.a)(e.currentCity),[t.city])});case g:return Object(x.a)(Object(x.a)({},e),{},{weatherInCurrentCities:[].concat(Object(m.a)(e.weatherInCurrentCities),[t.weather])});case I:return Object(x.a)(Object(x.a)({},e),{},{weatherInCurrentCities:Object(m.a)(e.weatherInCurrentCities.map((function(e){return e.id===t.id?Object(x.a)({},t.weather):e})))});case _:return Object(x.a)(Object(x.a)({},e),{},{isFetching:t.isFetching});case E:return Object(x.a)(Object(x.a)({},e),{},{weatherInCurrentCities:Object(m.a)(e.weatherInCurrentCities.filter((function(e){return e.id!==t.id})))});case T:return Object(x.a)(Object(x.a)({},e),{},{viewMode:t.viewMode});case F:return Object(x.a)(Object(x.a)({},e),{},{viewCityName:t.viewCityName});case W:return Object(x.a)(Object(x.a)({},e),{},{weatherForViewMode:t.weatherForViewMode});case M:return Object(x.a)(Object(x.a)({},e),{},{error:t.error});default:return e}},L=Object(b.b)((function(e){return{viewMode:e.weatherCard.viewMode,weatherForViewMode:e.weatherCard.weatherForViewMode}}),{viewCity:A,getWeatherForViewMode:function(e){return function(){var t=Object(f.a)(O.a.mark((function t(r){var n,a,c,i,s,o,u,d;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(V(!0)),t.next=3,y(e);case 3:n=t.sent,a=n.statusText,c=n.data,i=c.weather,s=c.wind,o=c.main,u=c.id,d=Object(p.a)(c,["weather","wind","main","id"]),console.log(d),"OK"===a&&r({type:W,weatherForViewMode:{weather:i,wind:s,main:o,id:u}}),r(V(!1));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.getWeatherForViewMode,r=e.viewCity,c=e.viewMode,i=e.weatherForViewMode,s=Object(u.g)().location.search.replace("?","");return Object(a.useEffect)((function(){c&&s&&t(s)}),[s,t,c,i]),Object(n.jsx)(l,{weatherForViewMode:i,viewCity:r,searchCity:s})})),G=r(114),U=r.n(G),B=r.p+"static/media/preloader.9bb0fb74.svg",K=function(e){return Object(n.jsx)("div",{children:Object(n.jsx)("img",{className:U.a.preloader,src:B,alt:"preloader"})})},Y=r(115),J=r(258),X=r(257),q=r(120),Z=r(259),z=r(254),Q=r(121);function $(){var e=Object(Y.a)(["\n  .search_city {\n    margin-top: 50px;\n  }\n  .submit_button {\n    margin: 0 auto;\n    display: block;\n    vertical-align: middle;\n    line-height: ;\n    padding: 6px;\n    outline: none;\n    border-radius: 5px;\n    background: none;\n    color: lightslategray;\n    border: 1px solid gray;\n    transition: 1s;\n    &:hover {\n      background: grey;\n      color: #fff\n    }\n  }\n"]);return $=function(){return e},e}var ee=r(116).a.div($()),te=function(e){var t=e.input,r=e.type,a=e.placeholder;return Object(n.jsx)(q.a,{type:r,placeholder:a,value:t.value,onChange:t.onChange})},re=Object(X.a)({form:"search"})((function(e){var t=e.handleSubmit;return Object(n.jsx)(ee,{children:Object(n.jsx)("div",{className:"search_city",children:Object(n.jsx)(Z.a,{onSubmit:t,className:"search_form",children:Object(n.jsxs)(z.a,{children:[Object(n.jsx)(Q.a,{md:7,children:Object(n.jsx)(Z.a.Group,{controlId:"formBasicEmail",children:Object(n.jsx)(J.a,{placeholder:"Enter the name of the city",name:"search",type:"text",component:te})})}),Object(n.jsx)(Q.a,{md:5,children:Object(n.jsx)("button",{className:"submit_button",children:"watch weather"})})]})})})})})),ne=function(e){return Object(n.jsx)(re,{onSubmit:function(t){e.getWeather(t.search)}})},ae=Object(b.b)(null,{getWeather:H})((function(e){var t=e.getWeather;return Object(n.jsx)(ne,{getWeather:t})})),ce=r(262),ie=function(e){var t=e.weather,r=t.main,a=t.weather,c=t.city,i=t.id,s=e.updateWeather,o=e.deleteCard,d=e.viewCity,l=Object(u.g)();return Object(n.jsx)(Q.a,{children:Object(n.jsx)("div",{style:{width:"18rem",marginTop:"25px"},className:"weather_card",children:Object(n.jsxs)(h.a,{children:[Object(n.jsxs)(j.a,{onClick:function(){return l.push("/view/?".concat(c)),void d(!0,c)},variant:"flush",children:[Object(n.jsxs)(j.a.Item,{style:{cursor:"pointer"},children:["City: ",c]}),Object(n.jsxs)(j.a.Item,{style:{cursor:"pointer"},children:["Weather: ",a[0].description]}),Object(n.jsxs)(j.a.Item,{style:{cursor:"pointer"},children:["Temp: ",r.temp]}),Object(n.jsxs)(j.a.Item,{style:{cursor:"pointer"},children:["Feels like: ",r.feels_like]})]}),Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(n.jsx)(ce.a,{variant:"secondary",onClick:function(){return s(c)},children:"Refresh"}),Object(n.jsx)(ce.a,{variant:"secondary",onClick:function(){return o(i,c)},children:"Delete"})]})]})})})},se=Object(b.b)(null,{updateWeather:function(e){return function(){var t=Object(f.a)(O.a.mark((function t(r){var n,a,c,i,s,o,u;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e);case 2:n=t.sent,a=n.statusText,c=n.data,i=c.weather,s=c.wind,o=c.main,u=c.id,"OK"===a&&r(N(u,{weather:i,wind:s,main:o,city:e,id:u}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},deleteCard:function(e,t){return function(r){r(function(e){return{type:E,id:e}}(e));var n=localStorage.getItem("currentCity").split(",").filter((function(e){return e!==t})).join();localStorage.setItem("currentCity",n)}},viewCity:A})((function(e){var t=e.deleteCard,r=e.updateWeather,a=e.weather,c=e.viewCity;return Object(n.jsx)(ie,{deleteCard:t,updateWeather:r,weather:a,viewCity:c})})),oe=Object(b.b)((function(e){return{weatherInCurrentCities:e.weatherCard.weatherInCurrentCities,isFetching:e.weatherCard.isFetching,error:e.weatherCard.error}}),{getWeather:H})((function(e){var t=e.getWeather,r=e.isFetching,c=e.weatherInCurrentCities,i=e.error;return Object(a.useEffect)((function(){var e=localStorage.getItem("currentCity");e&&!i&&e.split(",").map((function(e,r,n){n.length>c.length&&t(e)}))}),[t,c,i]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ae,{}),r?Object(n.jsx)(K,{}):null,Object(n.jsx)(z.a,{children:c?c.map((function(e,t){return Object(n.jsx)(se,{weather:e},t)})):null})]})})),ue=(r(252),r(255)),de=function(){return Object(n.jsx)("div",{className:"app",children:Object(n.jsx)(ue.a,{children:Object(n.jsxs)(u.d,{children:[Object(n.jsx)(u.b,{exact:!0,path:"/",component:oe}),Object(n.jsx)(u.b,{path:"/view",component:L}),Object(n.jsx)(u.a,{to:"/"})]})})})},he=Object(b.b)((function(e){return{currentCity:e.weatherCard.currentCity}}))((function(e){var t=e.currentCity;return Object(a.useEffect)((function(){t.length&&localStorage.setItem("currentCity",t)}),[t]),Object(n.jsx)(de,{})})),je=r(10),le=r(261),be=r(123),we=Object(je.c)({weatherCard:P,form:le.a}),Oe=Object(je.e)(we,Object(je.d)(Object(je.a)(be.a)));s.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(d.a,{children:Object(n.jsx)(b.a,{store:Oe,children:Object(n.jsx)(he,{})})})}),document.getElementById("root")),o()},81:function(e,t,r){}},[[253,1,2]]]);
//# sourceMappingURL=main.fbfc71f2.chunk.js.map