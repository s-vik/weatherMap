(this["webpackJsonpweather-map"]=this["webpackJsonpweather-map"]||[]).push([[0],{114:function(e,t,r){e.exports={preloader:"preloader_preloader__NrsZe"}},130:function(e,t,r){},252:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r(0),c=r(54),i=r.n(c),s=(r(130),r(131),function(e){e&&e instanceof Function&&Promise.resolve().then(r.bind(null,131)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;r(e),n(e),a(e),c(e),i(e)}))}),o=(r(81),r(11)),u=r(28),d=r(259),h=r(256),j=function(e){var t=e.viewCity,r=e.weatherForViewMode;e.searchCity;return r?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(u.b,{to:"/",onClick:function(){return t(!1,"")},children:"X"}),Object(n.jsx)(d.a,{children:Object(n.jsxs)(h.a,{variant:"flush",children:[Object(n.jsxs)(h.a.Item,{children:["City: ",r.name]}),Object(n.jsxs)(h.a.Item,{children:["Weather: ",r.weather[0].description]}),Object(n.jsxs)(h.a.Item,{children:["Temp: ",r.main.temp]}),Object(n.jsx)(h.a.Item,{children:r.main.feels_like}),Object(n.jsxs)(h.a.Item,{children:["Wind: ",r.wind.speed," m/s"]}),Object(n.jsxs)(h.a.Item,{children:["Humidity: ",r.main.humidity," %"]}),Object(n.jsxs)(h.a.Item,{children:["Pressure: ",r.main.pressure," hPa"]}),Object(n.jsxs)(h.a.Item,{children:["Temp max: ",r.main.temp_max]}),Object(n.jsxs)(h.a.Item,{children:["Temp min: ",r.main.temp_min]})]})})]}):Object(n.jsx)(u.b,{to:"/",onClick:function(){return t(!1,"")},children:"X"})},l=r(14),b=r(25),w=r.n(b),O=r(37),p=r(43),f=r(13),m=r(113).create({baseURL:"https://api.openweathermap.org/data/2.5/"}),x=function(e){return Object(O.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.get("weather?q=".concat(e,"&appid=28a565b6358bc0568063e6d2db733151&lang=ru&mode=json&units=metric")).catch((function(e){return console.error(e)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},C="weather_card_SET_CURRENT_CITY",y="weather_card_SET_CURRENT_CITY_WEATHER",v="weather_card_SET_IS_FETCHING",g="weather_card_UPDATE_WEATHER_CARD",_="weather_card_DELETE_WEATHER_CARD",I="weather_card_TOGGLE_VIEW_MODE",E="weather_card_SET_VIEW_CITY",T="weather_card_SET_WEATHER_FOR_VIEW_MODE",F="weather_card_SET_ERROR",W={currentCity:[],weatherInCurrentCities:[],isFetching:!1,viewMode:!1,viewCityName:"",weatherForViewMode:null,error:""},M=function(e){return{type:C,city:e}},k=function(e){return{type:y,weather:e}},R=function(e,t){return{type:g,id:e,weather:t}},S=function(e){return{type:v,isFetching:e}},N=function(e){return{type:F,error:e}},V=function(e,t){return function(r){r(function(e){return{type:I,viewMode:e}}(e)),r({type:E,viewCityName:t})}},D=function(e){return function(){var t=Object(O.a)(w.a.mark((function t(r){var n,a,c,i,s,o,u;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(S(!0)),t.next=3,x(e).catch((function(e){return r(N("error - no data"))}));case 3:n=t.sent,a=n.statusText,c=n.data,i=c.weather,s=c.wind,o=c.main,u=c.id,"OK"===a?(r(M(e)),r(k({weather:i,wind:s,main:o,city:e,id:u})),r(S(!1))):r(N("error - no data"));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(f.a)(Object(f.a)({},e),{},{currentCity:[].concat(Object(p.a)(e.currentCity),[t.city])});case y:return Object(f.a)(Object(f.a)({},e),{},{weatherInCurrentCities:[].concat(Object(p.a)(e.weatherInCurrentCities),[t.weather])});case g:return Object(f.a)(Object(f.a)({},e),{},{weatherInCurrentCities:Object(p.a)(e.weatherInCurrentCities.map((function(e){return e.id===t.id?Object(f.a)({},t.weather):e})))});case v:return Object(f.a)(Object(f.a)({},e),{},{isFetching:t.isFetching});case _:return Object(f.a)(Object(f.a)({},e),{},{weatherInCurrentCities:Object(p.a)(e.weatherInCurrentCities.filter((function(e){return e.id!==t.id})))});case I:return Object(f.a)(Object(f.a)({},e),{},{viewMode:t.viewMode});case E:return Object(f.a)(Object(f.a)({},e),{},{viewCityName:t.viewCityName});case T:return Object(f.a)(Object(f.a)({},e),{},{weatherForViewMode:t.weatherForViewMode});case F:return Object(f.a)(Object(f.a)({},e),{},{error:t.error});default:return e}},H=Object(l.b)((function(e){return{viewMode:e.weatherCard.viewMode,weatherForViewMode:e.weatherCard.weatherForViewMode}}),{viewCity:V,getWeatherForViewMode:function(e){return function(){var t=Object(O.a)(w.a.mark((function t(r){var n,a,c,i,s,o,u,d;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(S(!0)),t.next=3,x(e);case 3:n=t.sent,a=n.statusText,c=n.data,i=c.weather,s=c.wind,o=c.main,u=c.id,d=c.name,"OK"===a&&r({type:T,weatherForViewMode:{weather:i,wind:s,main:o,id:u,name:d}}),r(S(!1));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.getWeatherForViewMode,r=e.viewCity,c=e.viewMode,i=e.weatherForViewMode,s=Object(o.g)().location.search.replace("?","");return Object(a.useEffect)((function(){c&&s&&t(s)}),[s,t,c]),Object(n.jsx)(j,{weatherForViewMode:i,viewCity:r,searchCity:s})})),P=r(114),L=r.n(P),G=r.p+"static/media/preloader.9bb0fb74.svg",U=function(e){return Object(n.jsx)("div",{children:Object(n.jsx)("img",{className:L.a.preloader,src:G,alt:"preloader"})})},B=r(115),K=r(257),Y=r(255),J=r(120),X=r(258),q=r(253),Z=r(121);function z(){var e=Object(B.a)(["\n  .search_city {\n    margin-top: 50px;\n  }\n  .submit_button {\n    margin: 0 auto;\n    display: block;\n    vertical-align: middle;\n    line-height: ;\n    padding: 6px;\n    outline: none;\n    border-radius: 5px;\n    background: none;\n    color: lightslategray;\n    border: 1px solid gray;\n    transition: 1s;\n    &:hover {\n      background: grey;\n      color: #fff\n    }\n  }\n"]);return z=function(){return e},e}var Q=r(116).a.div(z()),$=function(e){var t=e.input,r=e.type,a=e.placeholder;return Object(n.jsx)(J.a,{type:r,placeholder:a,value:t.value,onChange:t.onChange})},ee=Object(Y.a)({form:"search"})((function(e){var t=e.handleSubmit;return Object(n.jsx)(Q,{children:Object(n.jsx)("div",{className:"search_city",children:Object(n.jsx)(X.a,{onSubmit:t,className:"search_form",children:Object(n.jsxs)(q.a,{children:[Object(n.jsx)(Z.a,{md:7,children:Object(n.jsx)(X.a.Group,{controlId:"formBasicEmail",children:Object(n.jsx)(K.a,{placeholder:"Enter the name of the city",name:"search",type:"text",component:$})})}),Object(n.jsx)(Z.a,{md:5,children:Object(n.jsx)("button",{className:"submit_button",children:"watch weather"})})]})})})})})),te=function(e){return Object(n.jsx)(ee,{onSubmit:function(t){e.getWeather(t.search)}})},re=Object(l.b)(null,{getWeather:D})((function(e){var t=e.getWeather;return Object(n.jsx)(te,{getWeather:t})})),ne=r(261),ae=function(e){var t=e.weather,r=t.main,a=t.weather,c=t.city,i=t.id,s=e.updateWeather,u=e.deleteCard,j=e.viewCity,l=Object(o.g)();return Object(n.jsx)(Z.a,{children:Object(n.jsx)("div",{style:{width:"18rem",marginTop:"25px"},className:"weather_card",children:Object(n.jsxs)(d.a,{children:[Object(n.jsxs)(h.a,{onClick:function(){return l.push("/view/?".concat(c)),void j(!0,c)},variant:"flush",children:[Object(n.jsxs)(h.a.Item,{style:{cursor:"pointer"},children:["City: ",c]}),Object(n.jsxs)(h.a.Item,{style:{cursor:"pointer"},children:["Weather: ",a[0].description]}),Object(n.jsxs)(h.a.Item,{style:{cursor:"pointer"},children:["Temp: ",r.temp]}),Object(n.jsxs)(h.a.Item,{style:{cursor:"pointer"},children:["Feels like: ",r.feels_like]})]}),Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(n.jsx)(ne.a,{variant:"secondary",onClick:function(){return s(c)},children:"Refresh"}),Object(n.jsx)(ne.a,{variant:"secondary",onClick:function(){return u(i,c)},children:"Delete"})]})]})})})},ce=Object(l.b)(null,{updateWeather:function(e){return function(){var t=Object(O.a)(w.a.mark((function t(r){var n,a,c,i,s,o,u;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(e);case 2:n=t.sent,a=n.statusText,c=n.data,i=c.weather,s=c.wind,o=c.main,u=c.id,"OK"===a&&r(R(u,{weather:i,wind:s,main:o,city:e,id:u}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},deleteCard:function(e,t){return function(r){r(function(e){return{type:_,id:e}}(e));var n=localStorage.getItem("currentCity").split(",").filter((function(e){return e!==t})).join();localStorage.setItem("currentCity",n)}},viewCity:V})((function(e){var t=e.deleteCard,r=e.updateWeather,a=e.weather,c=e.viewCity;return Object(n.jsx)(ae,{deleteCard:t,updateWeather:r,weather:a,viewCity:c})})),ie=Object(l.b)((function(e){return{weatherInCurrentCities:e.weatherCard.weatherInCurrentCities,isFetching:e.weatherCard.isFetching,error:e.weatherCard.error}}),{getWeather:D})((function(e){var t=e.getWeather,r=e.isFetching,c=e.weatherInCurrentCities,i=e.error;return Object(a.useEffect)((function(){var e=localStorage.getItem("currentCity");e&&!i&&e.split(",").map((function(e,r,n){n.length>c.length&&t(e)}))}),[t,c,i]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(re,{}),r?Object(n.jsx)(U,{}):null,Object(n.jsx)(q.a,{children:c?c.map((function(e,t){return Object(n.jsx)(ce,{weather:e},t)})):null})]})})),se=(r(251),r(254)),oe=function(){return Object(n.jsx)("div",{className:"app",children:Object(n.jsx)(se.a,{children:Object(n.jsxs)(o.d,{children:[Object(n.jsx)(o.b,{exact:!0,path:"/",component:ie}),Object(n.jsx)(o.b,{path:"/view",component:H}),Object(n.jsx)(o.a,{to:"/"})]})})})},ue=Object(l.b)((function(e){return{currentCity:e.weatherCard.currentCity}}))((function(e){var t=e.currentCity;return Object(a.useEffect)((function(){t.length&&localStorage.setItem("currentCity",t)}),[t]),Object(n.jsx)(oe,{})})),de=r(10),he=r(260),je=r(123),le=Object(de.c)({weatherCard:A,form:he.a}),be=Object(de.e)(le,Object(de.d)(Object(de.a)(je.a)));i.a.render(Object(n.jsx)(u.a,{children:Object(n.jsx)(l.a,{store:be,children:Object(n.jsx)(ue,{})})}),document.getElementById("root")),s()},81:function(e,t,r){}},[[252,1,2]]]);
//# sourceMappingURL=main.896fa127.chunk.js.map